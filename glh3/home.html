<!DOCTYPE html>
<html lang="en">
  <head>
	<title>GLKiosk</title>
    <link rel="stylesheet" href="css/animate.css">
    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap theme -->
    <link href="css/bootstrap-theme.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/main.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
  	<div> <!-- /container -->
  	<div id="glheader">
  		<div class="col-xs-3">
  			<div class="col-xs-12 clock">
        <br/>
  				<h3 id="hclock">09:15 AM</h3>
  				<h4 id="hdate">01/28/2017</h4>
  			</div>
  		</div>
      <div class="col-xs-1"></div>
  		<div class="col-xs-4">
  			<a href="imain.html" target="iiframe"><img src="img/logo_white.png" width="70%"></a>
  		</div>
  		<div class="col-xs-4">
  			<div id="weather"></div>
  		</div>
       <div class="row"></div>    
      <div id="eventshead">
        <div class="col-xs-5">
          <img src="img/eventsheader.png" width="100%">
        </div>
        <div class="col-xs-7"></div>        
      </div>
      
  	</div>
  		<div id="events">
        <iframe src="http://greenleafhotelgensan.com/kioskevents/" width="100%" height="100%" frameborder="0" scrolling="no"></iframe>
    </div>  
  	<div id="interactive">
  		<iframe src="imain.html" width="100%" height="100%" frameborder="0" name="iiframe" seamless scrolling="no"></iframe>
  	</div>
    <div id="ibuttons">
      <div class="btn-group">
        <a type="button" data-toggle="dropdown" class="btn btn-secondary dropdown-toggle" href="irooms.html" target="iiframe" role="button">ROOMS</a>
        <ul class="dropdown-menu">
            <li><a href="iroom_deluxe.html" target="iiframe">Deluxe Room</a></li>
            <li><a href="iroom_exgard.html" target="iiframe">Executive Garden Room</a></li>
            <li><a href="iroom_exver.html" target="iiframe">Executive Veranda Room</a></li>
            <li><a href="iroom_bs.html" target="iiframe">One Bedroom Suite</a></li>
            <li><a href="iroom_bgs.html" target="iiframe">One Bedroom Garden Suite</a></li>
            <li><a href="iroom_bvs.html" target="iiframe">One Bedroom Veranda Suite</a></li>
        </ul>
      </div>
      <div class="btn-group">
        <a type="button" data-toggle="dropdown" class="btn btn-secondary dropdown-toggle" href="irooms.html" target="iiframe" role="button">DINING</a>
        <ul class="dropdown-menu">
            <li><a href="idining_mint.html" target="iiframe">Mint Cafe</a></li>
            <li><a href="idining_tl.html" target="iiframe">Tea Leaf</a></li>
            <li><a href="idining_ll.html" target="iiframe">Lobby Lounge</a></li>
            <li><a href="idining_z.html" target="iiframe">Zanzibar</a></li>
        </ul>
      </div>
      <div class="btn-group">
        <a type="button" data-toggle="dropdown" class="btn btn-secondary dropdown-toggle" href="irooms.html" target="iiframe" role="button">FACILITIES</a>
        <ul class="dropdown-menu">
            <li><a href="ifacilities_pool.html" target="iiframe">Swimming Pool</a></li>
            <li><a href="ifacilities_spa.html" target="iiframe">Lavandin Spa</a></li>
            <li><a href="ifacilities_ls.html" target="iiframe">Lobby Shop</a></li>
            <li><a href="ifacilities_fr.html" target="iiframe">Function Rooms</a></li>
            <li><a href="ifacilities_p.html" target="iiframe">Pavilion</a></li>
        </ul>
      </div>
      <div class="btn-group">
        <a type="button" data-toggle="dropdown" class="btn btn-secondary dropdown-toggle" href="irooms.html" target="iiframe" role="button">VIDEOS</a>
        <ul class="dropdown-menu">
            <li><a href="http://greenleafhotelgensan.com/wp-content/uploads/2016/09/GreenInitiatives3.mp4?&autoplay=1" target="iiframe">Green Initiatives</a></li>
            <li><a href="http://greenleafhotelgensan.com/wp-content/uploads/2016/11/pavilion-video1.mp4?&autoplay=1" target="iiframe">Greenleaf Pavilion</a></li>
        </ul>
      </div>
      <a class="btn btn-secondary" href="icsr.html" target="iiframe" role="button">CSR</a>
      <a class="btn btn-secondary" href="http://greenleafhotelgensan.com/virtualtour/tour.html" target="iiframe" role="button">VIRTUAL TOUR</a>
      <a class="btn btn-secondary" href="imap.html" target="iiframe" id="gensanmap">GENSAN MAP</a>
      <a class="btn btn-secondary" href="http://greenleafhotelgensan.com/wp-content/uploads/2017/03/SOX-IS-NEXT-new.mp4?autoplay=1" target="iiframe" role="button">SOX</a>
    </div>
    <div id="ibuttonsbg"></div>
    <div id="reactions">
    <div class="col-xs-8"><h5>How was your Greenleaf Hotel Experience?</h5></div>
    <div class="col-xs-4">
      <div class="col-xs-2 reactionbox">
        <div id="reaction_like"><img class="react" id="react_like" src="img/reactions/like.gif" width="100%"></div>
      </div>
      <div class="col-xs-2 reactionbox">
        <div id="reaction_love"><img class="react" id="react_love" src="img/reactions/heart.gif" width="100%"></div>
      </div>
      <div class="col-xs-2 reactionbox">
        <div id="reaction_happy"><img class="react" id="react_happy" src="img/reactions/happy.gif" width="100%"></div>
      </div>
      <div class="col-xs-2 reactionbox">
        <div id="reaction_sad"><img class="react" id="react_sad" src="img/reactions/sad.gif" width="100%"></div>
      </div> 
    </div> 
    </div>
  	<div id="promos">
  		<iframe src="http://greenleafhotelgensan.com/kioskpromo/" width="100%" height="100%" frameborder="0" scrolling="no"></iframe>
  	</div>
    <div id="results">

    </div>  
    

    </div> <!-- /container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script type="text/javascript">
    	$(document).ready(function(){
         function getdate(){
            var today = new Date();
            var h = today.getHours();
            var m = today.getMinutes();
            var s = today.getSeconds();
            var days = ['SUN', 'MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT'];
			      var monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
            var dayName = days[today.getDay()];
            var ampm = h >= 12 ? 'PM' : 'AM';
			h = h % 12;
			h = h ? h : 12; // the hour '0' should be '12'
			m = m < 10 ? '0'+m : m;
	        if(s<10){
                 s = "0"+s;
             }

            $("#hclock").text(h+":"+m+" "+ampm);
            $("#hdate").text(dayName + "  " + monthNames[today.getMonth()] + " " +  today.getDate());
            $("#hday").text(dayName);
            setTimeout(function(){getdate()}, 500);
            }

            getdate()

          $.ajax({ 
              type: 'GET', 
              url: 'http://m.weather.gov.ph/agaptest/keycities.php', 
              dataType: "text",
              success: function (data) { 
                  var j ='{"0":{"level1":"done","level2":"done","level3":"no"}}';

                  var json = $.parseJSON(data);
                  json = json.result.data
                  for (var i=0;i<json.length;++i)
                  {
                    if (json[i].cityName == "General Santos, South Cotabato"){
                      $('#weather').append('<img height="75" src="img/weather_icons/'+json[i].icon+'.png" >');
                      $('#weather').append('<span class="temp">'+json[i].min+'°C - '+json[i].max+'°C</span>');
                      $('#weather').append('<h5>'+json[i].cityName+'</h5>'); 
                    }
                  }

              }
          });

          $("#react_like").click(function(){
              el = $('#react_like');
              el.addClass('animated rubberBand');
              el.one('webkitAnimationEnd oanimationend msAnimationEnd animationend',
              function (e) {
                  el.removeClass('animated rubberBand');
              });

              $.ajax({url: "https://glreactions.herokuapp.com/like", dataType: "text", error: function(xhr){
                  alert("An error occured: " + xhr.status + " " + xhr.statusText);
              }});
          });
          $("#react_love").click(function(){
              el = $('#react_love');
              el.addClass('animated rubberBand');
              el.one('webkitAnimationEnd oanimationend msAnimationEnd animationend',
              function (e) {
                  el.removeClass('animated rubberBand');
              });

              $.ajax({url: "https://glreactions.herokuapp.com/love", dataType: "text", error: function(xhr){
                  alert("An error occured: " + xhr.status + " " + xhr.statusText);
              }});
          });
          $("#react_happy").click(function(){
              el = $('#react_happy');
              el.addClass('animated rubberBand');
              el.one('webkitAnimationEnd oanimationend msAnimationEnd animationend',
              function (e) {
                  el.removeClass('animated rubberBand');
              });

              $.ajax({url: "https://glreactions.herokuapp.com/happy", dataType: "text", error: function(xhr){
                  alert("An error occured: " + xhr.status + " " + xhr.statusText);
              }});
          });
          $("#react_sad").click(function(){
              el = $('#react_sad');
              el.addClass('animated rubberBand');
              el.one('webkitAnimationEnd oanimationend msAnimationEnd animationend',
              function (e) {
                  el.removeClass('animated rubberBand');
              });

              $.ajax({url: "https://glreactions.herokuapp.com/sad", dataType: "text", error: function(xhr){
                  alert("An error occured: " + xhr.status + " " + xhr.statusText);
              }});
          }); 

          /*$("#gensanmap").click(function(){
            var sender = $(this).attr('id');
            alert(sender);
          });*/

          $('#interactive').on("load", function() {
              alert(1);
          });

    });

    function myHandler() {
        alert('iframe (almost) loaded');
    }
    $(document).on('iframeready', myHandler);
    </script>
    

  </body>
</html>